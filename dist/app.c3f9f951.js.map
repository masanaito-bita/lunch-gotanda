{"version":3,"sources":["js/modules/escapeHTML.js","js/modules/fetchShopInfo.js","js/modules/toggleChoices.js","js/modules/renderTop.js","js/app.js"],"names":["escapeSpecialChars","str","replace","escapeHTML","strings","values","reduce","result","i","value","String","API_KEY","AREA_GOTANDA","FORMAT","IS_LUNCH","COUNT","proxyserver","URL","randomNumber","num","Math","floor","random","scrollToTop","window","scroll","top","behavior","fetchShopInfo","element","rangeValue","smokingValue","RANGE","SMOKING","console","log","fetch","then","response","ok","error","json","dataJson","shop","results","detailLink","id","budget","average","innerHTML","genre","catch","name","logo_image","open","address","searchButton","document","querySelector","addEventListener","topLink","renderTop","toggleChoices","notChoiceElement","choiceElement","choice","classList","contains","remove","add","selectRange1","selectRange2","selectSmoking0","selectSmoking1","app"],"mappings":";;AIAA;;AAEA,IAAM0E,GAAG,GAAGjB,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAZ;AACA,IAAAG,oBAAA,EAAUa,GAAV;;AJHA,ACAA,AEAA,ADAA;AFCA,AEAA;AFCA,ACDA,AEAA,ADCA;AFCA,AEAA;AFCA,AGFA,ADEA;AFCA,AEAO,IAAMZ,KFAJ9D,QEAiB,GAAG,OFA7B,CAA4BC,CEAf6D,EFAb,EAAiC,SEAJ,CAACC,gBAAD,EAAmBC,aAAnB,EAAqC;EFChE,AEAAD,OFAO9D,GAAG,CACPC,KEDa,CAACyD,CFAV,CACI,IADJ,EACU,OADV,CEAP,CFEGzD,AEF+B,OFA3B,AEAP,CFEW,CEFgC,GFApC,EAEU,MAFV,CEA0C,CFG9CA,OAHI,CAGI,IAHJ,EAGU,MAHV,EAIJA,OAJI,CAII,IAJJ,EAIU,QAJV,EAKJA,OALI,CAKI,IALJ,EAKU,QALV,CAAP;AAMD,IELG,IAAM+D,MAAM,GAAIF,gBAAgB,CAACX,IAAjB,KAA0B,OAA3B,GAAsC,OAAtC,GAAgD,SAA/D;AFQJ,+CCdA;ADeA,IEPI,IAAIW,gBAAgB,CAACG,SAAjB,CAA2BC,QAA3B,uBAAmDF,MAAnD,EAAJ,EAAkE;AFQtE,AGbA,MDMMF,gBAAgB,CAACG,SAAjB,CAA2BE,MAA3B;AFQN,AGbA,MDMML,gBAAgB,CAACG,SAAjB,CAA2BE,MAA3B,uBAAiDH,MAAjD;AFQN,AGbA,MDMMF,gBAAgB,CAACG,SAAjB,CAA2BG,GAA3B,oBAA2CJ,MAA3C;AFQN,AGbO,IAAMJ,EDOPG,OCPgB,GAAG,GDON,CAACE,KCPPL,IDOP,CAAwBO,ICPL,CAACvC,CDOpB,MCPmB,EAAa,YDOWoC,MAA3C;ECNJpC,IDOImC,GCPG,CAACf,SAAR,ADOiB,CAACiB,MCPE/D,GDOhB,CAAwBkE,GAAxB,eCPJ,QDO+CJ,MAA3C,+yGCRgC,CAiDpC;MDxCID,aAAa,CAACE,SAAd,CAAwBG,GAAxB;AFKE,AClBR,EEsDE,EFtDI1D,ACcD,ECwCG2D,GHpCSnE,EClBJ,GAAG,IEsDI,CHpCZ,CAAoBC,CGoCLqD,MHpCf,EAAwC,AGoCjB,CAACC,EFtDhC,WEsDuB,CAAuB,kBAAvB,CAArB;AFrDF,EDiBgD,AGqC9C,ADxCC,CAZD,CDFI9C,EEsDE2D,UFtDU,EEsDE,CFtDC,EEsDEd,QAAQ,CAACC,MHrCQrD,ACjBxC,MDiBgD,CGqCzB,CAAuB,kBAAvB,CAArB;AFrDF,ACcC,CAdM,CCuDL,EHvCsCA,AChBlCQ,EEuDJiD,IHvC8C,AChBpC,GAAG,aAAf,QEuDE,EAAcQ,YAAd,EAA4BC,YAA5B;AFtDF,EDegD,AGwC9C,EFvDIzD,EEuDJgD,MFvDY,GAAG,SAAjB,UEuDE,EAAcS,YAAd,EAA4BD,YAA5B,EAtDoC,CAwDpC;AFxDF,IAAMvD,KAAK,GAAG,GAAd;AACA,EDcE,AG0CA,EFxDIC,EEwDEwD,GH1CCpE,MCdQ,CDcD,CAACE,CCdG,EEwDE,GH1Cb,AG0CgBmD,CH1CD,OG0CS,CAACC,EH1CTnD,MAAD,EAASN,GAAT,AG0CC,CAAuB,CH1CVO,CAAd,EAAoB,QCd5C,QEwDyB,CAAvB;AFtDF,EEuDE,EH1CE,ACbES,EEuDEwD,CFvDC,CDaChE,KAAK,GAAGJ,ICbHW,AEuDO,EH1CE,CAACR,AG0CAiD,CH1CC,GAAG,CAAL,CAApB,ECbK,AEuDwB,CAACC,aAAT,CAAuB,oBAAvB,CAAvB,mCFvDqF/C,OAA9E,cAAyFE,MAAzF,cAAmGD,YAAnG,cAAmHE,QAAnH,oBAAqIC,KAArI,CAAT;AAGA,EEsDE,IAAA+C,4BAAA,EAAcU,cAAd,EAA8BC,cAA9B;AFrDF,EEsDE,EH5CE,EG4CFX,EH5CM,OAAOrD,KAAP,KAAiB,QAArB,CG4CF,CH5CiC,CG4CnBgE,cAAd,EAA8BD,cAA9B;AFrDF,EEuDE,IH7CI,AG6CEhB,OH7CKjD,KG6CO,CH7CD,EG6CIkD,CH7CDzD,OG6CS,CAAC0D,UH7CQ,CAACjD,EG6ClB,CAAuB,EH7CN,CAA3B,GAAqCR,GAA5C,GG6CiB,CAArB;AFtDF,EEuDEuD,EH7CG,CAFD,MAEO,GG6CG,CAACG,gBAAb,CAA8B,OAA9B,EAAuC,YAAM;AFtD/C,IEuDI,EH7CE,EG6CI7B,KH7CGvB,KG6CO,CH7CD,EG6CIkD,CH7CD/C,MAAM,CAAC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","file":"app.c3f9f951.js","sourceRoot":"../docs","sourcesContent":["/**\n * HTML文字列をエスケープする\n * @param {string} str\n * @returns 変換された特定の記号\n */\nfunction escapeSpecialChars(str) {\n  return str\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\");\n}\n\n\n/**\n * escapeSpecialChars関数をHTML文字列の中で呼び出す タグ関数\n * @param {Array} strings\n * @param  {...any} values\n * @returns\n */\n export function escapeHTML(strings, ...values) {\n  return strings.reduce((result, str, i) => {\n    const value = values[i - 1];\n    if (typeof value === 'string') {\n      return result + escapeSpecialChars(value) + str;\n    } else {\n      return result + String(value) + str;\n    }\n  });\n}\n","import { escapeHTML } from \"./escapeHTML.js\";\nimport { renderTop } from \"./renderTop.js\";\n\nconst API_KEY = '244f51358beb91f3';\nconst AREA_GOTANDA = 'small_area=X086'\nconst FORMAT = 'format=json';\nconst IS_LUNCH = 'lunch=1';\nconst COUNT = 100\nconst proxyserver = 'https://cors-suzuki-app.herokuapp.com/';\n\nconst URL = `${proxyserver}http://webservice.recruit.co.jp/hotpepper/gourmet/v1/?key=${API_KEY}&${FORMAT}&${AREA_GOTANDA}&${IS_LUNCH}&count=${COUNT}`;\n\n\n/**\n * ランダムの整数を返す\n * @param {int} num\n * @returns\n */\nconst randomNumber = (num) => {\n  return Math.floor(Math.random() * num + 1);\n}\n\n/**\n * ページ上部へスクロールする\n */\nconst scrollToTop = () => {\n  window.scroll({ top: 0, behavior: 'smooth' });\n}\n\n\n/**\n * 飲食店情報を返す\n */\nexport const fetchShopInfo = (element, rangeValue, smokingValue) => {\n  // 距離パラメータ\n  const RANGE = `range=${rangeValue}`;\n  const SMOKING = `non_smoking=${smokingValue}`;\n\n  console.log(rangeValue);\n  console.log(smokingValue);\n\n  fetch(`${URL}&${RANGE}&${SMOKING}`).then(async function (response) {\n  // fetch(URL).then(async function (response) {\n    if (!response.ok) {\n      console.error(\"エラーレスポンス\", response);\n    } else {\n      const dataJson = await response.json();\n      const shop = dataJson.results.shop[randomNumber(COUNT)];\n      const detailLink = `https://www.hotpepper.jp/str${shop.id}/`;\n\n      if (!shop.budget.average) {\n        shop.budget.average = \"未設定です\";\n      }\n\n      element.innerHTML = escapeHTML`\n      <header class=\"header\">\n        <div class=\"header__text\">\n          <p>ここに行きませんか？</p>\n        </div>\n      </header>\n      <main class=\"main\">\n        <div class=\"shopInfoWrapper\">\n          <div class=\"shopInfo\">\n            <div class=\"shopInfo__heading\">\n              <p class=\"shopGenreCatch\">${shop.genre.catch}</p>\n              <p class=\"shopName\">${shop.name}</p>\n              <p class=\"shopGenreName\">${shop.genre.name}</p>\n              <p class=\"shopInfo__shopImage\">\n                <img src=\"${shop.logo_image}\" alt=\"${shop.name}\" width=\"200\" height=\"200\">\n              </p>\n              <p class=\"creditImage\">【画像提供:ホットペッパー グルメ】</p>\n            </div>\n            <div class=\"shopInfo__detail\">\n              <table class=\"table\">\n                <tr>\n                  <th class=\"table__head\">【営業時間】</th>\n                </tr>\n                <tr>\n                  <td class=\"table__data\">${shop.open}</td>\n                </tr>\n                <tr>\n                  <th class=\"table__head\">【平均予算】</th>\n                </tr>\n                <tr>\n                  <td class=\"table__data\">${shop.budget.average}</td>\n                </tr>\n              </table>\n              <div class=\"linkParent\">\n                <a href=${detailLink} class=\"link\">詳細を見る▶︎</a>\n              </div>\n              <div class=\"googleMap\">\n                <iframe width=\"300\" height=\"250\"\n                  src=\"&#104;tt&#112;s&#58;&#47;&#47;//maps.google.co.jp/maps?output=embed&q=${shop.address}&;\n                  t=m&;z=20\"\n                  frameborder=\"0\"\n                  scrolling=\"no\"\n                  allowfullscreen\n                  >\n                </iframe>\n              </div>\n              <table class=\"table\">\n                <tr>\n                  <th class=\"table__head\">【住所】</th>\n                </tr>\n                <tr>\n                  <td class=\"table__data\">${shop.address}</td>\n                </tr>\n              </table>\n            </div>\n          </div>\n          <p class=\"searchButtonParent\">\n            <button class=\"searchButton js-search\">再検索する</button>\n          </p>\n          <div class=\"linkParent\">\n            <a href=\"/lunch-gotanda\" class=\"link js-top\">トップページに戻る</a>\n          </div>\n        </div>\n      </main>\n      <footer class=\"footer\">\n        <p class=\"footer__hotpepper\">Powered by <a class=\"creditLink\" href=\"http://webservice.recruit.co.jp/\">ホットペッパー Webサービス</a></p>\n        <p class=\"footer__credit\">©bitA Inc. 2022</p>\n      </footer>\n      `;\n      const searchButton = document.querySelector('.js-search');\n      searchButton.addEventListener('click', () => { scrollToTop() });\n      searchButton.addEventListener('click', () => { fetchShopInfo(element, rangeValue, smokingValue) });\n      const topLink = document.querySelector('.js-top');\n      topLink.addEventListener('click', () => { renderTop(element) });\n    }\n  });\n}\n","/**\n * 条件選択ボタンの値を選択する機能\n * @param {Element} notChoiceElement\n * @param {Element} choiceElement\n */\nexport const toggleChoices = (notChoiceElement, choiceElement) => {\n  notChoiceElement.addEventListener('click', () => {\n    const choice = (notChoiceElement.name === 'range') ? 'Range' : 'Smoking';\n\n    if (notChoiceElement.classList.contains(`js-notChosen${choice}`)) {\n      notChoiceElement.classList.remove(`selectButton--disabled`);\n      notChoiceElement.classList.remove(`js-notChosen${choice}`);\n      notChoiceElement.classList.add(`js-chosen${choice}`);\n\n      choiceElement.classList.remove(`js-chosen${choice}`)\n      choiceElement.classList.add(`js-notChosen${choice}`)\n      choiceElement.classList.add(`selectButton--disabled`)\n    }\n  })\n}\n","import { escapeHTML } from \"./escapeHTML.js\";\nimport { fetchShopInfo } from \"./fetchShopInfo.js\";\nimport { toggleChoices } from \"./toggleChoices.js\";\n\n/**\n * トップページを表示する\n */\nexport const renderTop = (element) => {\n  element.innerHTML = escapeHTML`\n  <header class=\"header\">\n    <div class=\"header__text\">\n      <p>飲食店を提案します！</p>\n    </div>\n  </header>\n  <main class=\"main\">\n    <div class=\"topWrapper\">\n      <p class=\"announce\">条件を選んでください。</p>\n      <form name=\"form\" method=\"get\" action=\"\">\n        <div class=\"buttonWrapper\">\n          <button value=\"1\" type=\"button\" name=\"range\" class=\"selectButton selectButton--left js-selectRange1 js-chosenRange\">\n            <p class=\"text01\">本丸から</p>\n            <p class=\"text02\">5分</p>\n            <p class=\"text03\">以内</p>\n          </button>\n          <button value=\"2\" type=\"button\" name=\"range\" class=\"selectButton selectButton--right js-selectRange2 selectButton--disabled js-notChosenRange\">\n            <p class=\"text01\">本丸から</p>\n            <p class=\"text02\">10分</p>\n            <p class=\"text03\">以内</p>\n          </button>\n        </div>\n        <div class=\"buttonWrapper\">\n          <button value=\"0\" type=\"button\" name=\"smoking\" class=\"selectButton selectButton--left js-selectSmoking0 js-chosenSmoking\">\n            <p class=\"text04\">喫煙可含む</p>\n            <div class=\"smokingIcon\">\n              <svg class=\"icon icon-tabler icon-tabler-smoking\" fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0z\" fill=\"none\" stroke=\"none\"></path><rect height=\"4\" rx=\"1\" width=\"18\" x=\"3\" y=\"13\"></rect><line x1=\"8\" x2=\"8\" y1=\"13\" y2=\"17\"></line><path d=\"M16 5v.5a2 2 0 0 0 2 2a2 2 0 0 1 2 2v.5\"></path></svg>\n            </div>\n          </button>\n          <button value=\"1\" type=\"button\" name=\"smoking\" class=\"selectButton selectButton--right js-selectSmoking1 selectButton--disabled js-notChosenSmoking\">\n            <p class=\"text04\">禁煙席のみ</p>\n            <div class=\"smokingIcon\">\n              <svg class=\"icon icon-tabler icon-tabler-smoking-no\" fill=\"none\" height=\"24\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0z\" fill=\"none\" stroke=\"none\"></path><line x1=\"8\" x2=\"8\" y1=\"13\" y2=\"17\"></line><path d=\"M16 5v.5a2 2 0 0 0 2 2a2 2 0 0 1 2 2v.5\"></path><line x1=\"3\" x2=\"21\" y1=\"3\" y2=\"21\"></line><path d=\"M17 13h3a1 1 0 0 1 1 1v2c0 .28 -.115 .533 -.3 .714m-3.7 .286h-13a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1h9\"></path></svg>\n            </div>\n          </button>\n        </div>\n        <p class=\"searchButtonParent\">\n          <button type=\"button\" class=\"searchButton js-search\">検索する</button>\n        </p>\n      </form>\n    </div>\n  </main>\n  <footer class=\"footer\">\n    <div>Powered by <a class=\"creditLink\" href=\"http://webservice.recruit.co.jp/\">ホットペッパー Webサービス</a></div>\n    <div>©bitA Inc. 2022</div>\n  </footer>\n  `;\n\n  // 距離ボタン選択\n  const selectRange1 = document.querySelector(\".js-selectRange1\");\n  const selectRange2 = document.querySelector(\".js-selectRange2\");\n\n  toggleChoices(selectRange1, selectRange2);\n  toggleChoices(selectRange2, selectRange1);\n\n  // 喫煙ボタン選択\n  const selectSmoking0 = document.querySelector(\".js-selectSmoking0\");\n  const selectSmoking1 = document.querySelector(\".js-selectSmoking1\");\n\n  toggleChoices(selectSmoking0, selectSmoking1);\n  toggleChoices(selectSmoking1, selectSmoking0);\n\n  const searchButton = document.querySelector('.js-search');\n  searchButton.addEventListener('click', () => {\n    const rangeValue = document.querySelector(\".js-chosenRange\").value;\n    const smokingValue = document.querySelector(\".js-chosenSmoking\").value;\n    fetchShopInfo(element, rangeValue, smokingValue);\n  });\n}\n","import { renderTop } from \"./modules/renderTop.js\";\n\nconst app = document.querySelector('.app');\nrenderTop(app);\n"]}